jQuery(document).ready(function (e) { function t() { e(".input-phone").length > 0 && e(".input-phone").inputmask({ showMaskOnHover: !1, mask: "+7   (999)-999-99-99" }) } function n() { e("html:not(.android) .input-text").length > 0 && e("html:not(.android) .input-text").inputmask({ showMaskOnHover: !1, regex: "[a-zA-Zа-яА-Я]*" }) } function i() { e("html:not(.android) .input-email").length > 0 && e("html:not(.android) .input-email").inputmask("email") } function a() { e(".input-four").length > 0 && e(".input-four").inputmask({ mask: "9999", showMaskOnHover: !1 }) } e(document).width(); AOS.init({}); var s = function (e) { if ("open" == e && setTimeout(function () { if (!document.body.hasAttribute("data-body-scroll-fix")) { var e = window.pageYOffset || document.documentElement.scrollTop; document.body.setAttribute("data-body-scroll-fix", e), document.body.style.overflow = "hidden", document.body.style.position = "fixed", document.body.style.top = "-" + e + "px", document.body.style.left = "0", document.body.style.right = "0" } }, 10), "close" == e && document.body.hasAttribute("data-body-scroll-fix")) { var t = document.body.getAttribute("data-body-scroll-fix"); document.body.removeAttribute("data-body-scroll-fix"), document.body.style.overflow = "", document.body.style.position = "", document.body.style.top = "", document.body.style.left = "", document.body.style.right = "", window.scroll(0, t) } }; t(), n(), i(), a(), e("html.android .input-email").length > 0 && e("html.android .input-email").each(function (t, n) { e(n).attr("type", "email") }); var o = function () { var t = 0, n = e('.step_wrapper:first-child input[type="file"]'); n.each(function (n, i) { "" == e(i).val() && (t += 1) }), 0 == t && 0 == e(".step_wrapper:first-child .invalid").length ? e(".form-steps_wrapper .submit-btn").removeClass("disabled").attr("disabled", !1) : e(".form-steps_wrapper .submit-btn").addClass("disabled").attr("disabled", !0) }, l = function (e) { e.siblings(".invalid-text").length > 0 && e.siblings(".invalid-text").remove(), e.siblings(".label-default.invalid") && e.siblings(".label-default.invalid").removeClass("invalid") }; e("body").on("change", 'input[type="file"]', function (t) { if (NowInputText = e(this).next(".label-default").find(".label-default-file"), NowInputText.attr("now-text") || NowInputText.attr("now-text", NowInputText.text()), "" != e(this).val()) { if (this.files[0].size > 2097152) { var n = "<span class='invalid-text'>Загрузите файл размером не более 2мб</span>"; e(this).siblings(".invalid-text").remove(), e(n).insertAfter(e(this).siblings(".label-default")), e(this).siblings(".label-default").addClass("invalid") } else if (this.files[0].type.match(/(.png)|(.jpeg)|(.jpg)|(.gif)|(.pdf)$/i)) l(e(this)); else { var n = "<span class='invalid-text'>Загрузите файл в формате png, jpeg, jpg, gif, pdf</span>"; e(this).siblings(".invalid-text").remove(), e(n).insertAfter(e(this).siblings(".label-default")), e(this).siblings(".label-default").addClass("invalid") } NowInputText.text(this.files[0].name) } else NowInputText.text(NowInputText.attr("now-text")), l(e(this)); o() }); var d, r; e("body").on("submit", ".form-steps_block", function (t) { if (0 == e(this).find(".step_wrapper.open").index()) e(this).css({ "min-height": e(this).innerHeight() }), e(this).find(".step_wrapper.open").removeClass("open").hide().next(".step_wrapper").fadeIn().addClass("open"), e(this).siblings(".steps_wrapper").find(".step_current").hide().text("2").fadeIn(), d = e(this).siblings(".submit-btn_wrapper").find(".submit-btn").text(), e(this).siblings(".submit-btn_wrapper").find(".submit-btn").attr("now-text", d).text("Отправить форму"), e(this).siblings(".link_wrapper").fadeIn(); else if (1 == e(this).find(".step_wrapper.open").index()) { var n = 0; e(this).find('.label-default.invalid[for="input-status"]').length > 0 && (n += 1); var i = e(this).find(".step_wrapper.open .default-input_wrapper.required"); if (i.each(function (t, i) { if ("" == e(i).children(".input-default").val()) { var a = "<span class='invalid-text'>Введите Ваши данные</span>"; 0 == e(i).children(".invalid-text").length && (e(a).appendTo(e(i)), e(i).children(".input-default").addClass("invalid")), n += 1 } if (e(i).children(".input-default").val() && e(i).children(".input-default").hasClass("input-phone") && !e(i).children(".input-default.input-phone").inputmask("isComplete")) { var a = "<span class='invalid-text'>Ваши данные введены не верно</span>"; 0 == e(i).children(".invalid-text").length && (e(a).appendTo(e(i)), e(i).children(".input-default").addClass("invalid")), n += 1 } }), e(this).find(".input-email").val() && !e(this).find(".input-email").inputmask("isComplete")) { var a = e(this).find(".input-email"), o = "<span class='invalid-text'>Ваши данные введены не верно</span>"; 0 == a.next(".invalid-text").length && (e(o).appendTo(a.parent(".default-input_wrapper")), e(a).addClass("invalid")), n += 1 } 0 == n && (e("#modal-form-steps").modal({ fadeDuration: 150, closeClass: "close-custom", closeText: '<span class="visually-hidden">Закрыть</span>' }), s("open"), r = e(this).siblings(".submit-btn_wrapper").children(".submit-btn")) } t.preventDefault() }), e(".modal").on("modal:close", function (e, t) { s("close") }), e("body").on("focus click", ".input-default.invalid", function (t) { e(this).removeClass("invalid"), e(this).next(".invalid-text").remove() }), e("body").on("click", ".form-steps_wrapper .link_wrapper", function (t) { e(this).siblings(".form-steps_block").find(".step_wrapper.open").removeClass("open").hide().prev().fadeIn().addClass("open"), e(this).siblings(".steps_wrapper").find(".step_current").hide().text("1").fadeIn(), e(this).siblings(".submit-btn_wrapper").find(".submit-btn").text(d), e(this).hide() }); var p = function (e, t) { t.inputmask("remove"), t.parent(".default-input_wrapper.required").removeClass("required"), t.addClass("valid").attr("type", "text").val("Всё прошло успешно!").attr("disabled", !0), e.next(".submit-btn").attr("disabled", !0).css({ "background-color": "rgb(76, 175, 104)" }).text("Форма отправлена!").removeClass("pointer"), r.attr("disabled", !0).css({ "background-color": "rgb(76, 175, 104)" }).text("Форма отправлена!").removeClass("pointer"), r.parent(".submit-btn_wrapper").siblings(".link_wrapper").remove() }, c = "1234"; console.log("Код авторизации пользователя (последние 4 цифры номера телефона):" + c), e("body").on("submit", ".modal-steps-form", function (t) { var n, i = e(this).find(".input-default"); if ("" == i.val()) n = "<span class='invalid-text'>Введите Ваши данные</span>", 0 == e(this).find(".invalid-text").length && (e(n).appendTo(e(this).find(".default-input_wrapper")), i.addClass("invalid")); else if (i.val() && i.val() != c) n = "<span class='invalid-text'>Ваши данные введены неверно</span>", 0 == e(this).find(".invalid-text").length && (e(n).appendTo(e(this).find(".default-input_wrapper")), i.addClass("invalid")); else if (i.val() && i.val() == c) { var a = (e("#form-steps"), e(this)); p(a, i) } t.preventDefault() }); var u = function (e) { e.find(".question-form_submit").text("Отправлено!").css({ "background-color": "rgb(76, 175, 104)" }).attr("disabled", !0) }; e("body").on("submit", ".question-form", function (t) { var n = 0, i = e(this).find(".default-input_wrapper.required"); if (i.each(function (t, i) { "" == e(i).children(".input-default").val() && (InvalidText = "<span class='invalid-text'>Введите Ваши данные</span>", 0 == e(i).children(".input-default").next(".invalid-text").length && (e(InvalidText).appendTo(e(i)), e(i).children(".input-default").addClass("invalid")), n += 1), e(i).children(".input-default").val() && e(i).children(".input-default").hasClass("input-phone") && !e(i).children(".input-default").inputmask("isComplete") && (InvalidText = "<span class='invalid-text'>Ваши данные введены неверно</span>", 0 == e(i).children(".input-default").next(".invalid-text").length && (e(InvalidText).appendTo(e(i)), e(i).children(".input-default").addClass("invalid")), n += 1) }), 0 == n) { var a = e(this); u(a) } t.preventDefault() }) });